{
  "swagger": "2.0",
  "info": {
    "version": "0.4.0",
    "title": "dgx-patron-creator-service"
  },
  "host": "localhost:3001",
  "basePath": "/api",
  "schemes": [
    "http"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/v0.1/patrons": {
      "x-swagger-router-controller": "patrons",
      "post": {
        "tags": [
          "patrons"
        ],
        "summary": "Create a Patron",
        "description": "Create a new patron account via NYPL's Simplified Card Creator.",
        "operationId": "patrons_creatorV01",
        "parameters": [
          {
            "name": "patron_data",
            "in": "body",
            "description": "The information of the new patron",
            "required": true,
            "schema": {
              "$ref": "#/definitions/PatronsCreatorDataV01"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Successful operation",
            "schema": {
              "$ref": "#/definitions/PatronsCreatorResponseV01"
            }
          },
          "400": {
            "description": "Bad request",
            "schema": {
              "$ref": "#/definitions/400ErrorResponseV01"
            }
          },
          "500": {
            "description": "Generic server error",
            "schema": {
              "$ref": "#/definitions/500ErrorResponseV01"
            }
          }
        },
        "security": [
          {
            "api_auth": [
              "openid write:patron offline_access api"
            ]
          }
        ]
      }
    },
    "/v0.2/patrons": {
      "x-swagger-router-controller": "patrons",
      "post": {
        "tags": [
          "patrons"
        ],
        "summary": "Create a Patron",
        "description": "Create a new patron account via the ILS.",
        "operationId": "patrons_creatorV02",
        "parameters": [
          {
            "name": "patron_data",
            "in": "body",
            "description": "The information of the new patron",
            "required": true,
            "schema": {
              "$ref": "#/definitions/PatronsCreatorDataV02"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Successful operation",
            "schema": {
              "$ref": "#/definitions/PatronsCreatorResponseV02"
            }
          },
          "400": {
            "description": "Bad request",
            "schema": {
              "$ref": "#/definitions/400ErrorResponseV02"
            }
          },
          "500": {
            "description": "Generic server error",
            "schema": {
              "$ref": "#/definitions/500ErrorResponseV02"
            }
          }
        },
        "security": [
          {
            "api_auth": [
              "openid write:patron offline_access api"
            ]
          }
        ]
      }
    },
    "/v0.3/patrons": {
      "x-swagger-router-controller": "patrons",
      "post": {
        "tags": [
          "patrons"
        ],
        "summary": "Create a Patron",
        "description": "Create a new patron account via the ILS.",
        "operationId": "patrons_creatorV03",
        "parameters": [
          {
            "name": "patron",
            "in": "body",
            "description": "The information of the new patron",
            "required": true,
            "schema": {
              "$ref": "#/definitions/PatronsCreatorDataV03"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "$ref": "#/definitions/PatronsCreatorResponseV03"
            }
          },
          "400": {
            "description": "Bad request",
            "schema": {
              "$ref": "#/definitions/400ErrorResponseV03"
            }
          },
          "502": {
            "description": "Generic server error",
            "schema": {
              "$ref": "#/definitions/502ErrorResponseCreatePatronV03"
            }
          }
        },
        "security": [
          {
            "api_auth": [
              "openid write:patron offline_access api"
            ]
          }
        ]
      }
    },
    "/v0.3/patrons/dependents": {
      "x-swagger-router-controller": "patrons",
      "post": {
        "tags": [
          "patrons"
        ],
        "summary": "Create a dependent juvenile account",
        "description": "Create a dependent juvenile account based off a parent's patron account",
        "operationId": "patrons_dependentsV03",
        "parameters": [
          {
            "name": "barcode_and_input",
            "in": "body",
            "description": "The barcode or username of the existing parent patron and the dependent's account information.",
            "required": true,
            "schema": {
              "$ref": "#/definitions/PatronsDependentsDataV03"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "$ref": "#/definitions/PatronsDependentsResponseV03"
            }
          },
          "400": {
            "description": "Invalid request",
            "schema": {
              "$ref": "#/definitions/400ErrorResponseV03"
            }
          },
          "502": {
            "description": "ILS Integration Error",
            "schema": {
              "$ref": "#/definitions/502ILSIntegrationErrorV03"
            }
          }
        },
        "security": [
          {
            "api_auth": [
              "openid write:patron offline_access api"
            ]
          }
        ]
      }
    },
    "/v0.3/patrons/dependent-eligibility": {
      "x-swagger-router-controller": "patrons",
      "get": {
        "tags": [
          "patrons"
        ],
        "summary": "Check Patron's account creation eligibility",
        "description": "Check if a patron is eligible to create dependent juvenile accounts. Pass in either the barcode or username of the existing patron account to check for eligibility.",
        "operationId": "patrons_eligibilityV03",
        "parameters": [
          {
            "name": "barcode",
            "in": "query",
            "description": "The 14-digit barcode of the existing patron",
            "type": "string"
          },
          {
            "name": "username",
            "in": "query",
            "description": "The username of the existing patron",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "$ref": "#/definitions/PatronsEligibilityResponseV03"
            }
          },
          "400": {
            "description": "Invalid request",
            "schema": {
              "$ref": "#/definitions/400BarcodeErrorResponseV03"
            }
          },
          "502": {
            "description": "ILS Integration Error",
            "schema": {
              "$ref": "#/definitions/502ILSIntegrationErrorV03"
            }
          }
        },
        "security": [
          {
            "api_auth": [
              "openid write:patron offline_access api"
            ]
          }
        ]
      }
    },
    "/v0.1/validations/username": {
      "x-swagger-router-controller": "validations/username",
      "post": {
        "tags": [
          "validations"
        ],
        "summary": "Create a Patron username validation",
        "description": "Makes a call to NYPL's Simplified Card Creator API for patron username validation.",
        "operationId": "username",
        "parameters": [
          {
            "name": "username",
            "in": "body",
            "description": "The username to be validated",
            "required": true,
            "schema": {
              "$ref": "#/definitions/UsernameData"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "$ref": "#/definitions/UsernameResponse"
            }
          },
          "400": {
            "description": "Bad request",
            "schema": {
              "$ref": "#/definitions/400ErrorResponse"
            }
          },
          "500": {
            "description": "Generic server error",
            "schema": {
              "$ref": "#/definitions/500ErrorResponse"
            }
          }
        },
        "security": [
          {
            "api_auth": [
              "openid write:patron offline_access api"
            ]
          }
        ]
      }
    },
    "/v0.1/validations/address": {
      "x-swagger-router-controller": "validations/address",
      "post": {
        "tags": [
          "validations"
        ],
        "summary": "Create a Patron address validation",
        "description": "Makes a call to NYPL's Simplified Card Creator API for patron address validation.",
        "operationId": "address",
        "parameters": [
          {
            "name": "address_data",
            "in": "body",
            "description": "The address to be validated",
            "required": true,
            "schema": {
              "$ref": "#/definitions/AddressData"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "$ref": "#/definitions/AddressResponse"
            }
          },
          "400": {
            "description": "Bad request",
            "schema": {
              "$ref": "#/definitions/400ErrorResponse"
            }
          },
          "500": {
            "description": "Generic server error",
            "schema": {
              "$ref": "#/definitions/500ErrorResponse"
            }
          }
        },
        "security": [
          {
            "api_auth": [
              "openid write:patron offline_access api"
            ]
          }
        ]
      }
    },
    "/v0.3/validations/username": {
      "x-swagger-router-controller": "validations/username",
      "post": {
        "tags": [
          "validations"
        ],
        "summary": "Patron username validation and availability in the ILS",
        "description": "Simple username validation and then makes a call to the ILS API for patron username availability.",
        "operationId": "usernameV0.3",
        "parameters": [
          {
            "name": "username",
            "in": "body",
            "description": "The username to be validated and checked for availability",
            "required": true,
            "schema": {
              "$ref": "#/definitions/UsernameData"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "$ref": "#/definitions/UsernameResponseV03"
            }
          },
          "400": {
            "description": "Bad request",
            "schema": {
              "$ref": "#/definitions/400ErrorResponseUsernameV03"
            }
          },
          "500": {
            "description": "Generic server error",
            "schema": {
              "$ref": "#/definitions/500ErrorResponseUsernameV03"
            }
          }
        },
        "security": [
          {
            "api_auth": [
              "openid write:patron offline_access api"
            ]
          }
        ]
      }
    },
    "/v0.3/validations/address": {
      "x-swagger-router-controller": "validations/address",
      "post": {
        "tags": [
          "validations"
        ],
        "summary": "Address validation against Service Objects.",
        "description": "Makes a call to the Service Objects API for patron address and work address validation.",
        "operationId": "addressV03",
        "parameters": [
          {
            "name": "address",
            "in": "body",
            "description": "The address to be validated",
            "required": true,
            "schema": {
              "$ref": "#/definitions/AddressDataV03"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation",
            "schema": {
              "$ref": "#/definitions/AddressResponseV03"
            }
          },
          "400": {
            "description": "Bad request",
            "schema": {
              "$ref": "#/definitions/400ErrorResponseAddressV03"
            }
          },
          "500": {
            "description": "Generic server error",
            "schema": {
              "$ref": "#/definitions/502ErrorResponseAddressV03"
            }
          }
        },
        "security": [
          {
            "api_auth": [
              "openid write:patron offline_access api"
            ]
          }
        ]
      }
    }
  },
  "definitions": {
    "PatronsCreatorDataV01": {
      "required": [
        "simplePatron"
      ],
      "properties": {
        "simplePatron": {
          "$ref": "#/definitions/SimplePatronV01"
        }
      }
    },
    "SimplePatronV01": {
      "required": [
        "name",
        "dateOfBirth",
        "address",
        "username",
        "pin"
      ],
      "properties": {
        "name": {
          "type": "string",
          "example": "Mikey Olson, Jr."
        },
        "dateOfBirth": {
          "type": "string",
          "example": "11/11/1987"
        },
        "email": {
          "type": "string",
          "example": "mjolson@example.com"
        },
        "address": {
          "$ref": "#/definitions/AddressModel"
        },
        "username": {
          "type": "string",
          "example": "mjolson54321"
        },
        "pin": {
          "type": "string",
          "example": "1234"
        },
        "ecommunications_pref": {
          "type": "boolean",
          "example": true
        },
        "policy_type": {
          "type": "string",
          "example": "web_applicant"
        },
        "patron_agency": {
          "type": "string",
          "example": "198"
        }
      }
    },
    "PatronsCreatorResponseV01": {
      "type": "object",
      "properties": {
        "data": {
          "$ref": "#/definitions/PatronsCreatorResponseModelV01"
        },
        "count": {
          "type": "number",
          "example": 1
        }
      }
    },
    "PatronsCreatorResponseModelV01": {
      "properties": {
        "simplePatron": {
          "$ref": "#/definitions/SimplePatronModelV01"
        },
        "patron": {
          "type": "object",
          "example": {
          }
        }
      }
    },
    "SimplePatronModelV01": {
      "required": [
        "status_code_from_card_creator",
        "type",
        "username",
        "temporary",
        "patron_id",
        "barcode",
        "message",
        "detail"
      ],
      "properties": {
        "status_code_from_card_creator": {
          "type": "number",
          "example": 200
        },
        "type": {
          "type": "string",
          "example": "card-granted"
        },
        "username": {
          "type": "string",
          "example": "mikeolson54321"
        },
        "temporary": {
          "type": "boolean",
          "example": true
        },
        "patron_id": {
          "type": "string",
          "example": "6367028"
        },
        "barcode": {
          "type": "string",
          "example": "6367028"
        },
        "message": {
          "type": "string",
          "example": "Your library card is temporary because your address could not be verified. Visit your local NYPL branch within 30 days to upgrade to a standard card."
        },
        "detail": {
          "type": "object",
          "example": {
          }
        }
      }
    },
    "400ErrorResponseUsernameV03": {
      "properties": {
        "status": {
          "type": "number",
          "example": 400
        },
        "type": {
          "type": "string",
          "example": "invalid-username"
        },
        "message": {
          "type": "object",
          "example": "Usernames should be 5-25 characters, letters or numbers only. Please revise your username."
        },
        "detail": {
          "type": "object",
          "example": {
            "title": "",
            "debug": ""
          },
          "properties": {
            "title": {
              "type": "string"
            },
            "debug": {
              "type": "string"
            }
          }
        }
      }
    },
    "400ErrorResponseAddressV03": {
      "properties": {
        "status": {
          "type": "number",
          "example": 400
        },
        "cardType": {
          "type": "string",
          "example": null
        },
        "type": {
          "type": "string",
          "example": "valid-address",
        },
        "message": {
          "type": "string",
          "example": "Library cards are only available for residents of New York State or students and commuters working in New York City."
        },
        "address": {
          "$ref": "#/definitions/AddressModelValidatedV03"
        },
        "originalAddress": {
          "$ref": "#/definitions/AddressModelV03"
        }
      }
    },
    "400ErrorResponse": {
      "required": [
        "data"
      ],
      "properties": {
        "data": {
          "$ref": "#/definitions/400ErrorResponseContent"
        }
      }
    },
    "400ErrorResponseContent": {
      "allOf": [
        {
          "$ref": "#/definitions/400ErrorStatusModel"
        },
        {
          "$ref": "#/definitions/ErrorModel"
        }
      ]
    },
    "400ErrorResponseV01": {
      "properties": {
        "data": {
          "$ref": "#/definitions/400ErrorResponseContentV01"
        },
        "count": {
          "type": "number",
          "example": 0
        }
      }
    },
    "400ErrorResponseContentV01": {
      "allOf": [
        {
          "$ref": "#/definitions/400ErrorStatusSimplePatronV01"
        },
        {
          "$ref": "#/definitions/ErrorModelV01"
        }
      ]
    },
    "502ErrorResponseAddressV03": {
      "properties": {
        "status": {
          "type": "number",
          "example": 502
        },
        "cardType": {
          "type": "string",
          "example": "temporary"
        },
        "type": {
          "type": "string",
          "example": "unrecognized-address",
        },
        "message": {
          "type": "string",
          "example": "The library card will be a temporary library card."
        },
        "originalAddress": {
          "$ref": "#/definitions/AddressModelV03"
        },
        "reason": {
          "type": "string",
          "example": "The home address is in NYC but is not residential."
        },
        "error": {
          "type": "object",
          "example": {
            "type": "service-objects-integration-error",
            "name": "SOIntegrationError",
            "message": "Unexpected response status from Service Objects.",
            "status": 502
          }
        }
      }
    },
    "500ErrorResponse": {
      "required": [
        "data"
      ],
      "properties": {
        "data": {
          "$ref": "#/definitions/500ErrorResponseContent"
        }
      }
    },
    "500ErrorResponseContent": {
      "allOf": [
        {
          "$ref": "#/definitions/500ErrorStatusModel"
        },
        {
          "$ref": "#/definitions/ErrorModel"
        }
      ]
    },
    "500ErrorResponseV01": {
      "properties": {
        "data": {
          "$ref": "#/definitions/500ErrorResponseContentV01"
        },
        "count": {
          "type": "number",
          "example": 0
        }
      }
    },
    "500ErrorResponseContentV01": {
      "allOf": [
        {
          "$ref": "#/definitions/500ErrorStatusSimplePatronV01"
        },
        {
          "$ref": "#/definitions/ErrorModelV01"
        }
      ]
    },
    "500ErrorResponseUsernameV03": {
      "properties": {
        "status": {
          "type": "string",
          "example": 502
        },
        "type": {
          "type": "string",
          "example": "ils-integration-error"
        },
        "message": {
          "type": "string",
          "example": "The ILS could not be requested when validating the username.",
        },
        "detail": {
          "type": "object",
          "example": { "title": "", "debug": {} }
        }
      }
    },
    "502ErrorResponseCreatePatronV03": {
      "properties": {
        "status": {
          "type": "string",
          "example": 502
        },
        "type": {
          "type": "string",
          "example": "ils-integration-error"
        },
        "message": {
          "type": "string",
          "example": "The ILS could not be requested when attempting to create a patron.",
        },
        "detail": {
          "type": "object",
          "example": { "title": "", "debug": {} }
        }
      }
    },
    "400ErrorStatusSimplePatronV01": {
      "properties": {
        "simplePatron": {
          "$ref": "#/definitions/400ErrorStatusModelV01"
        }
      }
    },
    "400ErrorStatusModelV01": {
      "properties": {
        "status_code_from_card_creator": {
          "type": "number",
          "example": 400
        },
        "type": {
          "type": "string",
          "example": "invalid-request"
        },
        "message": {
          "type": "string",
          "example": "No data"
        },
        "detail": {
          "type": "object",
          "example": {
          }
        }
      }
    },
    "400ErrorStatusModel": {
      "required": [
        "status_code_from_card_creator",
        "type",
        "message"
      ],
      "properties": {
        "status_code_from_card_creator": {
          "type": "number",
          "example": 400
        },
        "type": {
          "type": "string",
          "example": "invalid-request"
        },
        "message": {
          "type": "string",
          "example": "No data"
        }
      }
    },
    "500ErrorStatusModel": {
      "required": [
        "status_code_from_card_creator",
        "type",
        "message"
      ],
      "properties": {
        "status_code_from_card_creator": {
          "type": "number",
          "example": 500
        },
        "type": {
          "type": "string",
          "example": "internal-server-error"
        },
        "message": {
          "type": "string",
          "example": "Internal server error"
        }
      }
    },
    "500ErrorStatusSimplePatronV01": {
      "properties": {
        "simplePatron": {
          "$ref": "#/definitions/500ErrorStatusModelV01"
        }
      }
    },
    "500ErrorStatusModelV01": {
      "properties": {
        "status_code_from_card_creator": {
          "type": "number",
          "example": 500
        },
        "type": {
          "type": "string",
          "example": "internal-server-error"
        },
        "message": {
          "type": "string",
          "example": "Internal server error"
        },
        "detail": {
          "type": "object",
          "example": {
          }
        }
      }
    },
    "ErrorModelV01": {
      "properties": {
        "patron": {
          "type": "object"
        }
      }
    },
    "ErrorModel": {
      "required": [
        "valid",
        "card_type",
        "detail"
      ],
      "properties": {
        "valid": {
          "type": "boolean",
          "example": false
        },
        "card_type": {
          "type": "string"
        },
        "detail": {
          "type": "object",
          "example": {
            "title": "Not found.",
            "debug": "Invalid endpoint: [POST] /v2/validate/address"
          }
        }
      }
    },
    "PatronsDependentsDataV03": {
      "required": [
        "barcode",
        "name",
        "username",
        "pin"
      ],
      "properties": {
        "barcode": {
          "type": "string",
          "example": "12345678912345"
        },
        "parentUsername": {
          "type": "string",
          "example": "parentUsername1"
        },
        "name": {
          "type": "string",
          "example": "Dependent First name, Last Name"
        },
        "username": {
          "type": "string",
          "example": "dependentUsername1"
        },
        "pin": {
          "type": "string",
          "example": "1234"
        }
      }
    },
    "PatronsCreatorDataV02": {
      "required": [
        "names",
        "patronType"
      ],
      "properties": {
        "names": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "example": [ "TestLastName, TestFirstName" ]
        },
        "barcodes": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "example": [ "barcode_2018_07_19_328pm" ]
        },
        "pin": {
          "type": "string",
          "example": "1234"
        },
        "expirationDate": {
          "type": "string",
          "example": "2019-01-01"
        },
        "birthDate": {
          "type": "string",
          "example": "1978-01-01"
        },
        "emails": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "example": [
            "test_email_2018_07_19_238_a@test.com",
            "test_email_2018_07_19_238_b@test.com"
          ]
        },
        "patronType": {
          "type": "number",
          "example": 151
        },
        "patronCodes": {
          "type": "object",
          "required": [
            "pcode1",
            "pcode2",
            "pcode3",
            "pcode4"
          ],
          "properties": {
            "pcode1": {
              "type": "string",
              "example": "s"
            },
            "pcode2": {
              "type": "string",
              "example": "f"
            },
            "pcode3": {
              "type": "number",
              "example": 5
            },
            "pcode4": {
              "type": "number",
              "example": 100
            }
          }
        },
        "blockInfo": {
          "type": "object",
          "required": [
            "code"
          ],
          "properties": {
            "code": {
              "type": "string",
              "example": "-"
            }
          }
        },
        "addresses": {
          "type": "array",
          "items": {
            "type": "object",
            "required": [
              "lines",
              "type"
            ],
            "properties": {
              "lines": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "example": [
                  "ADDRESS LINE 1",
                  "ADDRESS LINE 2"
                ]
              },
              "type": {
                "type": "string",
                "example": "a"
              }
            }
          }
        },
        "phones": {
          "type": "array",
          "items": {
            "type": "object",
            "required": [
              "number",
              "type"
            ],
            "properties": {
              "number": {
                "type": "string",
                "example": "917-123-4567"
              },
              "type": {
                "type": "string",
                "example": "t"
              }
            }
          }
        }
      }
    },
    "PatronsCreatorDataV03": {
      "required": [
        "names",
        "username",
        "pin",
        "address",
      ],
      "properties": {
        "name": {
          "type": "string",
          "example": "TestFirstName, TestLastName"
        },
        "username": {
          "type": "string",
          "example": "username"
        },
        "pin": {
          "type": "string",
          "example": "1234"
        },
        "address": {
          "$ref": "#/definitions/AddressModelV03"
        },
        "birthdate": {
          "type": "string",
          "example": "01-01-1988"
        },
        "email": {
          "type": "string",
          "example": "test@email.com"
        },
        "policyType": {
          "type": "string",
          "example": "simplye"
        },
        "workAddress": {
          "$ref": "#/definitions/AddressModelV03"
        },
      }
    },
    "PatronsCreatorResponseV02": {
      "type": "object",
      "properties": {
        "data": {
          "$ref": "#/definitions/PatronsCreatorResponseModelV02"
        },
        "count": {
          "type": "number",
          "example": 1
        }
      }
    },
    "PatronsEligibilityResponseV03": {
      "type": "object",
      "properties": {
        "status": {
          "type": "number",
          "example": 200
        },
        "eligible": {
          "type": "boolean"
        },
        "decription": {
          "type": "string",
          "example": "This patron can create dependent accounts."
        }
      }
    },
    "PatronsDependentsResponseV03": {
      "type": "object",
      "properties": {
        "status": {
          "type": "number",
          "example": 200
        },
        "data": {
          "properties": {
            "dependent": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "number",
                  "example": 12345
                },
                "username": {
                  "type": "string",
                  "example": "username12"
                },
                "name": {
                  "type": "string",
                  "example": "First name, last name"
                },
                "barcode": {
                  "type": "string",
                  "example": "28888888888888"
                },
                "pin": {
                  "type": "string",
                  "example": "1234"
                }
              }
            },
            "parent": {
              "type": "object",
              "properties": {
                "updated": {
                  "type": "boolean",
                  "example": true
                },
                "barcode": {
                  "type": "string",
                  "example": "28888888888886"
                },
                "dependents": {
                  "type": "string",
                  "example": "DEPENDENTS 28888888888887,28888888888888"
                }
              }
            }
          }
        }
      }
    },
    "PatronsCreatorResponseModelV02": {
      "required": [
        "names",
        "patronType"
      ],
      "properties": {
        "id": {
          "type": "integer",
          "example": 7212911
        },
        "names": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "example": [ "TestLastName, TestFirstName" ]
        },
        "barcodes": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "example": [ "barcode_2018_07_19_328pm" ]
        },
        "pin": {
          "type": "string",
          "example": "1111"
        },
        "expirationDate": {
          "type": "string",
          "example": "2019-01-01"
        },
        "birthDate": {
          "type": "string",
          "example": "1978-01-01"
        },
        "emails": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "example": [
            "test_email_2018_07_19_238_a@test.com",
            "test_email_2018_07_19_238_b@test.com"
          ]
        },
        "patronType": {
          "type": "number",
          "example": 151
        },
        "patronCodes": {
          "type": "object",
          "example": {
            "pcode1": "s",
            "pcode2": "f",
            "pcode3": 5,
            "pcode4": 100
          }
        },
        "blockInfo": {
          "type": "string",
          "example": {
            "code": "-"
          }
        },
        "addresses": {
          "type": "array",
          "items": {
            "type": "object"
          },
          "example": [{
            "lines": [
              "ADDRESS LINE 1",
              "ADDRESS LINE 2"
            ],
            "type": "a"
          }]
        },
        "type": {
          "type": "string",
          "example": {
            "code": "a"
          }
        },
        "phones": {
          "type": "array",
          "items": {
            "type": "object"
          },
          "example": [{
            "number": "917-123-4567",
            "type": "t"
          }]
        }
      }
    },
    "PatronsCreatorResponseV03": {
      "type": "object",
      "properties": {
        "status": {
          "type": "number",
          "example": 200
        },
        "link": {
          "type": "string",
          "example": "https://link.com/to/ils/1234567"
        },
        "type": {
          "type": "string",
          "example": "card-granted"
        },
        "barcode": {
          "type": "string",
          "example": "111122222222345"
        },
        "username": {
          "type": "string",
          "example": "username"
        },
        "pin": {
          "type": "string",
          "example": "1111"
        },
        "temporary": {
          "type": "boolean",
          "example": false
        },
        "message": {
          "type": "string",
          "example": "The library card will be a standard library card."
        },
        "patronId": {
          "type": "number",
          "example": "1234567"
        }
      }
    },
    "400ErrorResponseV02": {
      "properties": {
        "status_code_from_ils": {
          "type": "number",
          "example": 400
        },
        "type": {
          "type": "string",
          "example": "invalid-request"
        },
        "message": {
          "type": "string",
          "example": "No data"
        },
        "detail": {
          "type": "object",
          "example": {
          }
        }
      }
    },
    "400ErrorResponseV03": {
      "properties": {
        "status": {
          "type": "number",
          "example": 400
        },
        "type": {
          "type": "string",
          "example": "invalid-request"
        },
        "message": {
          "type": "object",
          "example": "Some value is wrong"
        },
        "detail": {
          "type": "object",
          "example": {
            "title": "",
            "debug": ""
          },
          "properties": {
            "title": {
              "type": "string"
            },
            "debug": {
              "type": "string"
            }
          }
        }
      }
    },
    "400BarcodeErrorResponseV03": {
      "properties": {
        "status": {
          "type": "number",
          "example": 400
        },
        "type": {
          "type": "string",
          "example": "not-eligible-card"
        },
        "message": {
          "type": "string",
          "example": "You have reached the limit of dependent cards you can receive via online application."
        },
        "detail": {
          "type": "object",
          "example": {
            "title": "",
            "debug": ""
          },
          "properties": {
            "title": {
              "type": "string"
            },
            "debug": {
              "type": "string"
            }
          }
        }
      }
    },
    "500ErrorResponseV02": {
      "properties": {
        "status_code_from_ils": {
          "type": "number",
          "example": 500
        },
        "type": {
          "type": "string",
          "example": "internal-server-error"
        },
        "message": {
          "type": "string",
          "example": "Internal server error"
        },
        "detail": {
          "type": "object",
          "example": {
          }
        }
      }
    },
    "502ILSIntegrationErrorV03": {
      "properties": {
        "status": {
          "type": "number",
          "example": 502
        },
        "type": {
          "type": "string",
          "example": "remote-integration-failure"
        },
        "message": {
          "type": "number",
          "example": "The ILS could not be requested."
        },
        "detail": {
          "type": "object",
          "example": {
            "title": "",
            "debug": ""
          },
          "properties": {
            "title": {
              "type": "string"
            },
            "debug": {
              "type": "string"
            }
          }
        }
      }
    },
    "UsernameData": {
      "required": [
        "username"
      ],
      "properties": {
        "username": {
          "type": "string",
          "example": "mikeolson"
        }
      }
    },
    "UsernameResponse": {
      "type": "object",
      "required": [
        "data"
      ],
      "properties": {
        "data": {
          "$ref": "#/definitions/UsernameResponseModel"
        }
      }
    },
    "UsernameResponseModel": {
      "required": [
        "status_code_from_card_creator",
        "valid",
        "type",
        "card_type",
        "message",
        "detail"
      ],
      "properties": {
        "status_code_from_card_creator": {
          "type": "number",
          "example": 200
        },
        "valid": {
          "type": "boolean",
          "example": true
        },
        "type": {
          "type": "string",
          "example": "available-username"
        },
        "card_type": {
          "type": "string",
          "example": "standard"
        },
        "message": {
          "type": "string",
          "example": "This username is available."
        },
        "detail": {
          "type": "object",
          "example": {}
        }
      }
    },
    "UsernameResponseV03": {
      "type": "object",
      "properties": {
        "data": {
          "$ref": "#/definitions/UsernameResponseModelV03"
        }
      }
    },
    "UsernameResponseModelV03": {
      "properties": {
        "type": {
          "type": "string",
          "example": "available-username"
        },
        "cardType": {
          "type": "string",
          "example": "standard"
        },
        "message": {
          "type": "string",
          "example": "This username is available."
        }
      }
    },
    "AddressData": {
      "description": "The data format of the input address",
      "required": [
        "address"
      ],
      "properties": {
        "address": {
          "$ref": "#/definitions/AddressModel"
        },
        "is_work_or_school_address": {
          "type": "boolean",
          "default": false,
          "example": true
        }
      }
    },
    "AddressDataV03": {
      "description": "The data format of the input address",
      "required": [
        "address"
      ],
      "properties": {
        "address": {
          "$ref": "#/definitions/AddressModelV03"
        },
        "isWorkAddress": {
          "type": "boolean",
          "default": false,
          "example": true
        },
        "policyType": {
          "type": "string",
          "default": "simplye",
          "example": "simplye"
        }
      }
    },
    "AddressResponseV03": {
      "type": "object",
      "properties": {
        "status": {
          "type": "number",
          "example": 200
        },
        "type": {
          "type": "string",
          "example": "valid-address"
        },
        "cardType": {
          "type": "string",
          "example": "standard"
        },
        "message": {
          "type": "string",
          "example": "The library card will be a standard library card."
        },
        "address": {
          "$ref": "#/definitions/AddressModelValidatedV03"
        },
        "original_address": {
          "$ref": "#/definitions/AddressModelV03"
        }
      }
    },
    "AddressResponse": {
      "type": "object",
      "required": [
        "data"
      ],
      "properties": {
        "data": {
          "$ref": "#/definitions/AddressResponseModel"
        }
      }
    },
    "AddressResponseModel": {
      "required": [
        "status_code_from_card_creator",
        "valid",
        "type",
        "card_type",
        "message",
        "detail",
        "addresses",
        "original_address"
      ],
      "properties": {
        "status_code_from_card_creator": {
          "type": "number",
          "example": 200
        },
        "valid": {
          "type": "boolean",
          "example": true
        },
        "type": {
          "type": "string",
          "example": "valid-address"
        },
        "card_type": {
          "type": "string",
          "example": "standard"
        },
        "message": {
          "type": "string",
          "example": "This valid address will result in a standard library card."
        },
        "detail": {
          "type": "object",
          "example": {}
        },
        "addresses": {
          "type": "array",
          "items": {
            "required": [
              "line_1",
              "line_2",
              "city",
              "county",
              "state",
              "zip",
              "is_residential"
            ],
            "properties": {
              "line_1": {
                "type": "string",
                "example": "123 W40th St"
              },
              "line_2": {
                "type": "string",
                "example": ""
              },
              "city": {
                "type": "string",
                "example": "New York"
              },
              "county": {
                "type": "string",
                "example": "New York"
              },
              "state": {
                "type": "string",
                "example": "NY"
              },
              "zip": {
                "type": "string",
                "example": "10018-2600"
              },
              "is_residential": {
                "type": "boolean",
                "example": false
              }
            }
          }
        },
        "original_address": {
          "$ref": "#/definitions/AddressModel"
        }
      }
    },
    "AddressModel": {
      "type": "object",
      "required": [
        "line_1",
        "city",
        "state",
        "zip"
      ],
      "properties": {
        "line_1": {
          "type": "string",
          "example": "123 Fake Street"
        },
        "line_2": {
          "type": "string",
          "example": ""
        },
        "city": {
          "type": "string",
          "example": "New York"
        },
        "state": {
          "type": "string",
          "example": "NY"
        },
        "zip": {
          "type": "string",
          "example": "10018"
        }
      }
    },
    "AddressModelV03": {
      "type": "object",
      "properties": {
        "line1": {
          "type": "string",
          "example": "123 Fake Street"
        },
        "line2": {
          "type": "string",
          "example": ""
        },
        "city": {
          "type": "string",
          "example": "New York"
        },
        "state": {
          "type": "string",
          "example": "NY"
        },
        "zip": {
          "type": "string",
          "example": "10018"
        }
      }
    },
    "AddressModelValidatedV03": {
      "type": "object",
      "properties": {
        "line1": {
          "type": "string",
          "example": "123 Fake Street"
        },
        "line2": {
          "type": "string",
          "example": ""
        },
        "city": {
          "type": "string",
          "example": "New York"
        },
        "county": {
          "type": "string",
          "example": ""
        },
        "state": {
          "type": "string",
          "example": "NY"
        },
        "zip": {
          "type": "string",
          "example": "10018-1234"
        },
        "isResidential": {
          "type": "boolean",
          "example": true
        },
        "hasBeenValidated": {
          "type": "boolean",
          "example": true
        }
      }
    }
  },
  "tags": [
    {
      "name": "patrons",
      "description": "Patron API"
    },
    {
      "name": "validations",
      "description": "Validations API"
    }
  ],
  "securityDefinitions": {
    "api_auth": {
      "type": "oauth2",
      "flow": "accessCode",
      "authorizationUrl": "https://isso.nypl.org/oauth/authorize",
      "tokenUrl": "https://isso.nypl.org/oauth/token",
      "scopes": {
        "openid write:patron offline_access api": "Creating Patron and Validations access"
      }
    }
  }
}
